<mat-horizontal-stepper
  [linear]="true"
  #stepper
  class="login-stepper"
  [@.disabled]="true"
>
  <mat-step [stepControl]="loginGroupOne">
    <form
      [formGroup]="loginGroupOne"
      (ngSubmit)="submitLoginFormOne(loginGroupOne.value)"
      #logingroupone="ngForm"
    >
      <mat-form-field class="login-form-group login-fadein-animation">
        <h1 class="login-welcome-display">Hello, what's your name?</h1>
        <input
          matInput
          formControlName="name"
          required
          class="login-stepper-input"
        />
      </mat-form-field>
      <div>
        <button mat-button matStepperNext>Next</button>
      </div>
    </form>
  </mat-step>
  <mat-step [stepControl]="loginGroupTwo">
    <form
      [formGroup]="loginGroupTwo"
      (ngSubmit)="submitLoginFormTwo(loginGroupTwo.value)"
    >
      <mat-form-field
        class="login-form-group"
        [ngClass]="{ 'login-fadein-animation': stepper.selectedIndex === 1 }"
      >
        <h2 class="login-welcome-display">
          What's your email, {{ username }}?
        </h2>
        <input
          matInput
          formControlName="email"
          class="login-stepper-input"
          required
        />
      </mat-form-field>
      <!-- <app-loading-indicator loading="loading"></app-loading-indicator> -->
      <div>
        <button mat-button matStepperNext>Next</button>
      </div>
    </form>
  </mat-step>
  <mat-step [stepControl]="loginGroupThree">
    <form
      [formGroup]="loginGroupThree"
      (ngSubmit)="
        emailInUse
          ? submitLoginForm(loginGroupThree.value)
          : submitSignUpForm(loginGroupThree.value)
      "
    >
      <mat-form-field
        class="login-form-group login-fadein-animation"
        [ngClass]="{ 'login-fadein-animation': stepper.selectedIndex === 2 }"
      >
        <!-- Show either of the following display texts - depending on if the email is already in use or not -->
        <h2 class="login-welcome-display" *ngIf="emailInUse; else noAccount">
          What's your password?
        </h2>
        <ng-template #noAccount
          ><h2 class="login-welcome-display">
            Please choose your password.
          </h2></ng-template
        >
        <input
          matInput
          formControlName="password"
          type="password"
          required
          class="login-stepper-input"
        />
        <span class="login-error-message">{{ errorMessage }}</span>
      </mat-form-field>
      <!-- <app-loading-indicator loading="loading"></app-loading-indicator> -->
      <div>
        <button mat-button (click)="stepper.reset()">Reset</button>
        <button mat-button type="submit">
          Submit
        </button>
        <button mat-button matStepperPrevious>Previous</button>
      </div>
    </form>
  </mat-step>
</mat-horizontal-stepper>
