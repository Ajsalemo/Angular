<p class="footer">
  <mat-toolbar class="footer-mat-toolbar">
    <div>
      <button
        mat-icon-button
        aria-label="Settings widget"
        [matMenuTriggerFor]="menu"
      >
        <mat-icon class="footer-settings-icon">settings</mat-icon>
      </button>
      <mat-menu #menu="matMenu" class="footer-menu">
        <div class="footer-menu-login-menu">
          <button mat-icon-button *ngIf="!currentUser" (click)="logUserIn()">
            <mat-icon aria-hidden="false" aria-label="Account icon"
              >account_circle</mat-icon
            >
            Login
          </button>
          <div>
            <ul class="footer-menu-login-menu-list">
              <li
                class="footer-menu-login-menu-list-item"
                (click)="toggleGeneralState($event)"
              >
                General
              </li>
              <li
                class="footer-menu-login-menu-list-item"
                (click)="togglePhotoState($event)"
              >
                Photos
              </li>
            </ul>
          </div>
          <mat-expansion-panel
            (click)="$event.stopPropagation()"
            class="footer-menu-logout-menu"
            [ngClass]="{ 'footer-menu-logout-menu-closed': !panelOpenState }"
            (opened)="panelOpenState = true"
            (closed)="panelOpenState = false"
            *ngIf="currentUser"
          >
            <mat-expansion-panel-header class="footer-menu-logout-menu-header">
              <mat-panel-title class="footer-menu-logout-menu-user-account">
                <mat-icon aria-hidden="false" aria-label="Account icon"
                  >account_circle</mat-icon
                >
                {{ currentUser }}
              </mat-panel-title>
            </mat-expansion-panel-header>
            <button
              mat-icon-button
              (click)="logUserOut()"
              class="footer-menu-logout-menu-user-account-button"
            >
              Logout
            </button>
          </mat-expansion-panel>
        </div>
        <div
          *ngIf="!photoOpenState || generalOpenState"
          class="footer-menu-general"
        >
          <div>
            <h2>General</h2>
            <h4 class="footer-menu-general-sub-header">
              Customize your dashboard
            </h4>
            <form
              class="footer-menu-general-toggle-div"
              (click)="$event.stopPropagation()"
              [formGroup]="slideToggleGroup"
            >
              <h4 class="footer-menu-general-show-header">Show</h4>
              <mat-slide-toggle
                class="footer-menu-general-toggle"
                [(ngModel)]="isLinks"
                formControlName="links"
                (change)="submitAccountPreferences(slideToggleGroup.value)"
                >Links</mat-slide-toggle
              >
              <mat-slide-toggle
                class="footer-menu-general-toggle"
                [(ngModel)]="isSearch"
                formControlName="search"
                (change)="submitAccountPreferences(slideToggleGroup.value)"
                >Search</mat-slide-toggle
              >
              <mat-slide-toggle
                class="footer-menu-general-toggle"
                [(ngModel)]="isWeather"
                formControlName="weather"
                (change)="submitAccountPreferences(slideToggleGroup.value)"
                >Weather</mat-slide-toggle
              >
              <mat-slide-toggle
                class="footer-menu-general-toggle"
                [(ngModel)]="isTodo"
                formControlName="todo"
                (change)="submitAccountPreferences(slideToggleGroup.value)"
                >Todo</mat-slide-toggle
              >
            </form>
          </div>
        </div>
        <div *ngIf="photoOpenState" class="footer-menu-general">
          <div>
            <h2>Photos</h2>
            <h4 class="footer-menu-general-sub-header">
              See a new photo each day
            </h4>
          </div>
        </div>
      </mat-menu>
      <a
        href="{{ photoURL }}"
        target="_blank"
        rel="noopener noreferrer"
        class="footer-photo-link"
        >{{ authorToDisplay }} / Unsplash</a
      >
    </div>
    <span class="footer-todo-text">Todo</span>
  </mat-toolbar>
</p>
